<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate Pseudo Population — generate_pseudo_pop • CausalGPS</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Generate Pseudo Population — generate_pseudo_pop" />
<meta property="og:description" content="Generates pseudo population data set based on user-defined causal inference
approach. The function uses an adaptive approach to satisfies covariate
balance requirements. The function terminates either by satisfying covariate
balance or completing the requested number of iteration, whichever comes
first." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CausalGPS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/CausalGPS.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="divider"></li>
    <li class="dropdown-header">Introduction</li>
    <li>
      <a href="../articles/estimating_gps.html">Estimating GPS</a>
    </li>
    <li>
      <a href="../articles/generating_pseudo_population.html">Generating Pseudo Population</a>
    </li>
    <li>
      <a href="../articles/outcome_models.html">Outcome Models</a>
    </li>
    <li>
      <a href="../articles/generate_synthetic_data.html">Generate Synthetic Data</a>
    </li>
    <li>
      <a href="../articles/faq.html">Frequently Asked Questions</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Collabration</li>
    <li>
      <a href="../articles/contribution.html">Developers Guide</a>
    </li>
    <li>
      <a href="../articles/testing_the_package.html">Testing the Package</a>
    </li>
    <li>
      <a href="../articles/notes_on_sl_wrapper.html">Notes on SL Wrappers</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/fasrc/CausalGPS/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate Pseudo Population</h1>
    <small class="dont-index">Source: <a href='https://github.com/fasrc/CausalGPS/blob/master/R/generate_pseudo_pop.R'><code>R/generate_pseudo_pop.R</code></a></small>
    <div class="hidden name"><code>generate_pseudo_pop.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generates pseudo population data set based on user-defined causal inference
approach. The function uses an adaptive approach to satisfies covariate
balance requirements. The function terminates either by satisfying covariate
balance or completing the requested number of iteration, whichever comes
first.</p>
    </div>

    <pre class="usage"><span class='fu'>generate_pseudo_pop</span><span class='op'>(</span>
  <span class='va'>Y</span>,
  <span class='va'>w</span>,
  <span class='va'>c</span>,
  <span class='va'>ci_appr</span>,
  <span class='va'>pred_model</span>,
  gps_model <span class='op'>=</span> <span class='st'>"parametric"</span>,
  use_cov_transform <span class='op'>=</span> <span class='cn'>FALSE</span>,
  transformers <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>"pow2"</span>, <span class='st'>"pow3"</span><span class='op'>)</span>,
  bin_seq <span class='op'>=</span> <span class='cn'>NULL</span>,
  trim_quantiles <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.01</span>, <span class='fl'>0.99</span><span class='op'>)</span>,
  optimized_compile <span class='op'>=</span> <span class='cn'>FALSE</span>,
  params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  nthread <span class='op'>=</span> <span class='fl'>1</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Y</th>
      <td><p>A vector of observed outcome variable.</p></td>
    </tr>
    <tr>
      <th>w</th>
      <td><p>A vector of observed continuous exposure variable.</p></td>
    </tr>
    <tr>
      <th>c</th>
      <td><p>A data.frame or matrix of observed covariates variable.</p></td>
    </tr>
    <tr>
      <th>ci_appr</th>
      <td><p>The causal inference approach. Possible values are:</p><ul>
<li><p>"matching": Matching by GPS</p></li>
<li><p>"weighting": Weighting by GPS</p></li>
<li><p>"adjusting": Adjusting by GPS</p></li>
</ul></td>
    </tr>
    <tr>
      <th>pred_model</th>
      <td><p>a prediction model (use "sl" for SuperLearner)</p></td>
    </tr>
    <tr>
      <th>gps_model</th>
      <td><p>Model type which is used for estimating GPS value, including
parametric (default) and non-parametric.</p></td>
    </tr>
    <tr>
      <th>use_cov_transform</th>
      <td><p>If TRUE, the function uses transformer to meet the
covariate balance.</p></td>
    </tr>
    <tr>
      <th>transformers</th>
      <td><p>A list of transformers. Each transformer should be a
unary function. You can pass name of customized function in the quotes.
Available transformers:</p><ul>
<li><p>pow2: to the power of 2</p></li>
<li><p>pow3: to the power of 3</p></li>
</ul></td>
    </tr>
    <tr>
      <th>bin_seq</th>
      <td><p>Sequence of w (treatment) to generate pseudo population. If
NULL is passed the default value will be used, which is
<code><a href='https://rdrr.io/r/base/seq.html'>seq(min(w)+delta_n/2,max(w), by=delta_n)</a></code>.</p></td>
    </tr>
    <tr>
      <th>trim_quantiles</th>
      <td><p>A numerical vector of two. Represents the trim quantile
level. Both numbers should be in the range of [0,1] and in increasing order
(default: c(0.01,0.99)).</p></td>
    </tr>
    <tr>
      <th>optimized_compile</th>
      <td><p>If TRUE, uses counts to keep track of number of
replicated pseudo population.</p></td>
    </tr>
    <tr>
      <th>params</th>
      <td><p>Includes list of params that is used internally. Unrelated
parameters will be ignored.</p></td>
    </tr>
    <tr>
      <th>nthread</th>
      <td><p>An integer value that represents the number of threads to be
used by internal packages.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to different models.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a pseudo population (gpsm_pspop) object that is generated
or augmented based on the selected causal inference approach (ci_appr). The
object includes the following objects:</p><ul>
<li><p>params</p><ul>
<li><p>ci_appr</p></li>
<li><p>pred_model</p></li>
<li><p>params</p></li>
</ul></li>
<li><p>pseudo_pop</p></li>
<li><p>adjusted_corr_results</p></li>
<li><p>original_corr_results</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Additional parameters</h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Causal Inference Approach (ci.appr)</h4>

<ul>
<li><p>if ci.appr = 'matching':</p><ul>
<li><p><em>matching_fun</em>: Matching function. Available options:</p><ul>
<li><p>matching_l1: Manhattan distance matching</p></li>
</ul></li>
<li><p><em>delta_n</em>: caliper parameter.</p></li>
<li><p><em>scale</em>: a specified scale parameter to control the relative weight that
is attributed to the distance measures of the exposure versus the GPS.</p></li>
<li><p><em>covar_bl_method</em>: covariate balance method. Available options:</p><ul>
<li><p>'absolute'</p></li>
</ul></li>
<li><p><em>covar_bl_trs</em>: covariate balance threshold</p></li>
<li><p><em>max_attempt</em>: maximum number of attempt to satisfy covariate balance.</p></li>
<li><p>See <code><a href='create_matching.html'>create_matching()</a></code> for more details about the parameters and default
values.</p></li>
</ul></li>
<li><p>if ci.appr = 'weighting':</p><ul>
<li><p><em>covar_bl_method</em>: Covariate balance method.</p></li>
<li><p><em>covar_bl_trs</em>: Covariate balance threshold</p></li>
<li><p><em>max_attempt</em>: Maximum number of attempt to satisfy covariate balance.</p></li>
</ul></li>
</ul>


<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Prediction models (pred_model)</h4>

<ul>
<li><p>if pred_model = 'sl':</p><ul>
<li><p><em>sl_lib</em>: A vector of prediction algorithms.</p></li>
</ul></li>
</ul>





    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>m_d</span> <span class='op'>&lt;-</span> <span class='fu'><a href='generate_syn_data.html'>generate_syn_data</a></span><span class='op'>(</span>sample_size <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>
<span class='va'>pseuoo_pop</span> <span class='op'>&lt;-</span> <span class='fu'>generate_pseudo_pop</span><span class='op'>(</span><span class='va'>m_d</span><span class='op'>$</span><span class='va'>Y</span>,
                                  <span class='va'>m_d</span><span class='op'>$</span><span class='va'>treat</span>,
                                  <span class='va'>m_d</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"cf1"</span>,<span class='st'>"cf2"</span>,<span class='st'>"cf3"</span>,<span class='st'>"cf4"</span>,<span class='st'>"cf5"</span>,<span class='st'>"cf6"</span><span class='op'>)</span><span class='op'>]</span>,
                                  ci_appr <span class='op'>=</span> <span class='st'>"matching"</span>,
                                  pred_model <span class='op'>=</span> <span class='st'>"sl"</span>,
                                  gps_model <span class='op'>=</span> <span class='st'>"parametric"</span>,
                                  bin_seq <span class='op'>=</span> <span class='cn'>NULL</span>,
                                  trim_quantiles <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.01</span>,<span class='fl'>0.99</span><span class='op'>)</span>,
                                  optimized_compile <span class='op'>=</span> <span class='cn'>FALSE</span>,
                                  use_cov_transform <span class='op'>=</span> <span class='cn'>FALSE</span>,
                                  transformers <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
                                  sl_lib <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"m_xgboost"</span><span class='op'>)</span>,
                                  params <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>xgb_nrounds<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>10</span>,<span class='fl'>20</span>,<span class='fl'>30</span><span class='op'>)</span>,
                                                xgb_eta<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.1</span>,<span class='fl'>0.2</span>,<span class='fl'>0.3</span><span class='op'>)</span><span class='op'>)</span>,
                                  nthread <span class='op'>=</span> <span class='fl'>1</span>,
                                  covar_bl_method <span class='op'>=</span> <span class='st'>"absolute"</span>,
                                  covar_bl_trs <span class='op'>=</span> <span class='fl'>0.1</span>,
                                  max_attempt <span class='op'>=</span> <span class='fl'>1</span>,
                                  matching_fun <span class='op'>=</span> <span class='st'>"matching_l1"</span>,
                                  delta_n <span class='op'>=</span> <span class='fl'>1</span>,
                                  scale <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Mean absolute correlation:  0.211848109584963 | Covariate balance threshold:  0.1</span></div><div class='output co'>#&gt; <span class='message'>Mean absolute correlation:  0.160957598771937 | Covariate balance threshold:  0.1</span></div><div class='output co'>#&gt; <span class='message'>Covariate balance condition has not been met.</span></div><div class='output co'>#&gt; <span class='message'>Best Mean absolute correlation:  0.160957598771937 | Covariate balance threshold:  0.1</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Naeem Khoshnevis, Xiao Wu, Danielle Braun.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'API_KEY',
    indexName: 'INDEX_NAME',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


